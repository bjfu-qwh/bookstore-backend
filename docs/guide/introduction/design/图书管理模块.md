# 图书管理模块 设计文档

图书管理模块属于**业务模块**，其功能如下：

- 定义图书实体，规定一本图书商品的属性。
- 创建图书：支持**商家上传一本图书作为旗下商品**。
- 图书信息修改：商家可以**修改自家图书信息**。包括下架。

图书实体的定义是系统的**核心业务**，如何定义基本图书信息关乎全局。

## 图书实体需求分析

在线图书销售系统给出**图书实体应当有的属性**：

|   属性名    |    属性类型     |    属性标识     | 属性说明                                              |    特殊性质     |
|:--------:|:-----------:|:-----------:|:--------------------------------------------------|:-----------:|
|   词条编号   |   bigint    |     id      | 用于充当数据表主键                                         |     主键      |
|   ISBN   |   varchar   |    isbn     | 符合[国际规定](https://en.wikipedia.org/wiki/ISBN)的通用标识 |    唯一索引     |
|   图书名    |   varchar   |    name     | 描述图书商品的名称                                         |     索引      |
|  图书类别编号  |   bigint    | categoryID  | 图书**根分类**编号，关于分类系统请看[说明文档](图书分类管理模块.md)           |     索引      |
|   图书图片   |   varchar   |     url     | 图书商品图，**可能不止一张**，如**详情页轮播图**会展示多张                 |  实现远程图片存储   |
|  图书说明文字  |   varchar   |    brief    | 对图书而言，简要的介绍文字不可缺少                                 |  需要限制一定字数   |
| **商品详情** | varchar(s)  | description | 图书详情**应该支持富文本编辑**                                 | **必须实现富文本** |
|    作者    |   varchar   |   author    | 应当假设**一本图书可以由多人合著**                               |     索引      |
|   出版社    |   varchar   |    press    | 一本图书由一个出版社唯一出版                                    |     索引      |
|    页数    |     int     |    page     | 一本图书的页数可以作为消费者的参考信息                               |      无      |
|    版次    |   varchar   |   edition   | 以简要文字说明图书的版次                                      |      无      |
|   出版日期   |    date     |  published  | 精确到日期即可，**与版次组合使用**。                              |    实现排序     |
|    价格    | **decimal** |    price    | 描述图书价格，**涉及价格必须用高精度**                             |      无      |
|   图书库存   |     int     |   amount    | 图书库存由店家决定，若库存变为0则图书应该显示“无货”                       |    并发同步     |
|    装帧    |   varchar   |    type     | 涉及常见的如**平装**，**精装**，**软精装**等装帧                    |      无      |

由上表可以总结出图书管理模块的特性：

- 业务复杂：涉及**大量字段**，且不少字段**存在细分为数据表的空间**。
- 数据库压力沉重：在上述字段中，存在**相当多需要索引的字段**，大量索引也会给数据表带来负担。
- 技术复杂：涉及**富文本编辑器、对象存储**等较为复杂的技术。

## 图书管理模块功能分析

作为系统最为复杂的模块，功能需求也最为复杂。

- 店家**上传图书**：店家可以详细地上传新图书。要求**使用富文本编辑器实现较为现代的图文编辑体验**。
- 图书**搜索**：无论店家还是买家，都应支持**图书名、出版社、作家、ISBN等**一系列**模糊搜索功能**。
- 图书信息管理：店家在后台，可以管理已上架图书。包括信息查看与修改、**下架图书等**。
